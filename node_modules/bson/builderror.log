gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
../../nan/nan.h:70:13: error: no type named 'UnboundScript' in namespace 'v8'
typedef v8::UnboundScript      NanUnboundScript;
        ~~~~^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
../../nan/nan_new.h:181:20: error: no member named 'UnboundScript' in namespace 'v8'
struct Factory<v8::UnboundScript> : FactoryBase<v8::UnboundScript> {
               ~~~~^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:30:25: error: cannot initialize a parameter of type 'int' with an rvalue of type 'v8::Isolate *'
  return v8::Array::New(v8::Isolate::GetCurrent());
                        ^~~~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:2335:31: note: passing argument to parameter 'length' here
  static Local<Array> New(int length = 0);
                              ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:35:52: error: too many arguments to function call, expected at most single argument 'length', have 2 arguments
  return v8::Array::New(v8::Isolate::GetCurrent(), length);
         ~~~~~~~~~~~~~~                            ^~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:2335:3: note: 'New' declared here
  static Local<Array> New(int length = 0);
  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:42:54: error: too many arguments to function call, expected single argument 'value', have 2 arguments
  return v8::Boolean::New(v8::Isolate::GetCurrent(), value);
         ~~~~~~~~~~~~~~~~                            ^~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:5967:1: note: 'New' declared here
Handle<Boolean> Boolean::New(bool value) {
^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:65:51: error: too many arguments to function call, expected single argument 'time', have 2 arguments
  return v8::Date::New(v8::Isolate::GetCurrent(), value).As<v8::Date>();
         ~~~~~~~~~~~~~                            ^~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:2866:3: note: 'New' declared here
  static Local<Value> New(double time);
  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:65:69: error: expected '(' for function-style cast or type construction
  return v8::Date::New(v8::Isolate::GetCurrent(), value).As<v8::Date>();
                                                            ~~~~~~~~^
../../nan/nan_implementation_12_inl.h:65:71: error: expected expression
  return v8::Date::New(v8::Isolate::GetCurrent(), value).As<v8::Date>();
                                                                      ^
../../nan/nan_implementation_12_inl.h:72:55: error: too many arguments to function call, expected single argument 'value', have 2 arguments
  return v8::External::New(v8::Isolate::GetCurrent(), value);
         ~~~~~~~~~~~~~~~~~                            ^~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:3045:3: note: 'New' declared here
  static Local<External> New(void* value);
  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:91:37: error: cannot initialize a parameter of type 'FunctionCallback' (aka 'void (*)(const FunctionCallbackInfo<v8::Value> &)') with an rvalue of type 'v8::Isolate *'
  return v8::FunctionTemplate::New( v8::Isolate::GetCurrent()
                                    ^~~~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:3347:24: note: passing argument to parameter 'callback' here
      FunctionCallback callback = 0,
                       ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:109:33: error: too many arguments to function call, expected single argument 'value', have 2 arguments
                              , value).As<v8::NumberObject>();
                                ^~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:2904:3: note: 'New' declared here
  static Local<Value> New(double value);
  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:109:59: error: expected '(' for function-style cast or type construction
                              , value).As<v8::NumberObject>();
                                          ~~~~~~~~~~~~~~~~^
../../nan/nan_implementation_12_inl.h:109:61: error: expected expression
                              , value).As<v8::NumberObject>();
                                                            ^
../../nan/nan_implementation_12_inl.h:129:7: error: no matching function for call to 'NewFromUnsigned'
      v8::Uint32::NewFromUnsigned(v8::Isolate::GetCurrent(), value));
      ^~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:1965:25: note: candidate function not viable: no known conversion from 'v8::Isolate *' to 'uint32_t' (aka 'unsigned int') for 1st argument
  static Local<Integer> NewFromUnsigned(uint32_t value, Isolate*);
                        ^
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:1963:25: note: candidate function not viable: requires single argument 'value', but 2 arguments were provided
  static Local<Integer> NewFromUnsigned(uint32_t value);
                        ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:135:7: error: no matching function for call to 'NewFromUnsigned'
      v8::Uint32::NewFromUnsigned(v8::Isolate::GetCurrent(), value));
      ^~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:1965:25: note: candidate function not viable: no known conversion from 'v8::Isolate *' to 'uint32_t' (aka 'unsigned int') for 1st argument
  static Local<Integer> NewFromUnsigned(uint32_t value, Isolate*);
                        ^
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:1963:25: note: candidate function not viable: requires single argument 'value', but 2 arguments were provided
  static Local<Integer> NewFromUnsigned(uint32_t value);
                        ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:142:26: error: too many arguments to function call, expected 0, have 1
  return v8::Object::New(v8::Isolate::GetCurrent());
         ~~~~~~~~~~~~~~~ ^~~~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:2307:3: note: 'New' declared here
  static Local<Object> New();
  ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:149:10: error: no matching function for call to 'New'
  return v8::ObjectTemplate::New(v8::Isolate::GetCurrent());
         ^~~~~~~~~~~~~~~~~~~~~~~
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:3574:32: note: candidate function not viable: no known conversion from 'v8::Isolate *' to 'Handle<v8::FunctionTemplate>' for 1st argument
  static Local<ObjectTemplate> New(Handle<FunctionTemplate> constructor);
                               ^
/Users/zxm/.node-gyp/0.11.12/deps/v8/include/v8.h:3433:32: note: candidate function not viable: requires 0 arguments, but 1 was provided
  static Local<ObjectTemplate> New();
                               ^
In file included from ../ext/bson.cc:36:
In file included from ../ext/bson.h:17:
In file included from ../../nan/nan.h:82:
In file included from ../../nan/nan_new.h:189:
../../nan/nan_implementation_12_inl.h:165:7: error: no member named 'ScriptCompiler' in namespace 'v8'
  v8::ScriptCompiler::Source src(source);
  ~~~~^
../../nan/nan_implementation_12_inl.h:166:14: error: no member named 'ScriptCompiler' in namespace 'v8'
  return v8::ScriptCompiler::Compile(v8::Isolate::GetCurrent(), &src);
         ~~~~^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated.
make: *** [Release/obj.target/bson/ext/bson.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:107:17)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:1045:12)
gyp ERR! System Darwin 15.3.0
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /Users/zxm/Documents/work/koaTest/node_modules/bson
gyp ERR! node -v v0.11.12
gyp ERR! node-gyp -v v3.3.1
gyp ERR! not ok 
